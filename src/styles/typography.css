@import "tailwindcss";

/* MARGINS */
@layer base {
  .header-margin {
    @apply px-3 py-2;
  }
  .body-margin {
    @apply mx-auto max-w-4xl;
  }
  .main-margin {
    @apply px-6 py-3;
  }
  .center {
    @apply mx-auto max-w-3xl pb-13;
  }
  .footer-margin {
    @apply px-3 pt-16 pb-2;
  }
}

/* CUSTOM CLASSES */
@layer base {
  /* navbar */
  .navigation {
    @apply hover:text-accent text-base tracking-wider select-none;
  }

  /* button */
  .button {
    @apply text-accent ring-accent hover:bg-accent hover:text-background rounded-lg px-3 py-1 tracking-wide ring-1 select-none hover:font-semibold active:ring-0;
  }

  /* heading */
  .heading {
    @apply py-6 text-5xl font-semibold select-none;
  }
  .sub-heading {
    @apply py-6 text-5xl select-none;
  }
  .section-heading {
    @apply pb-6 text-center text-3xl font-light tracking-widest select-none;
  }
  .blog-title {
    @apply py-3 pt-6 text-5xl font-semibold select-none;
  }

  /* common */
  .animation {
    @apply transition-all duration-150 ease-in-out;
  }
  .paragraph {
    @apply space-y-6 text-lg leading-relaxed opacity-90;
  }
  .link {
    @apply text-accent active:text-foreground decoration-dashed underline-offset-3 hover:underline hover:underline-offset-6;
  }
  .figure {
    @apply relative my-6;
  }
  .image {
    @apply ring-accent h-auto w-full object-cover ring-1 select-none group-hover:brightness-75;
  }
  .figcaption {
    @apply absolute inset-0 flex items-center justify-center bg-black/40 p-3 text-center text-white/86 opacity-0 group-hover:opacity-100 sm:text-xl md:text-2xl lg:text-3xl;
  }

  /* socials */
  .socials {
    @apply hover:stroke-accent size-8 stroke-1;
  }

  /* divider */
  hr {
    @apply border-foreground/26 m-13;
  }
}

/* MARKDOWN STYLES */
@layer base {
  .markdown {
    /* headings */
    h2 {
      @apply pt-13 pb-3 text-4xl;
      a {
        @apply text-foreground no-underline hover:no-underline;
      }
    }
    h3 {
      @apply pt-8 pb-2 text-3xl;
      a {
        @apply text-foreground no-underline hover:no-underline;
      }
    }
    h4 {
      @apply pt-6 pb-2 text-2xl;
      a {
        @apply text-foreground no-underline hover:no-underline;
      }
    }

    h5 {
      @apply pt-3 pb-1 text-xl;
      a {
        @apply text-foreground no-underline hover:no-underline;
      }
    }

    /* paragraph */
    p {
      @apply text-lg leading-relaxed opacity-90;
    }

    /* url */
    a {
      @apply text-accent active:text-foreground decoration-dashed underline-offset-3 transition-all duration-150 ease-in-out hover:underline hover:underline-offset-6;
    }

    /* quote */
    blockquote {
      @apply border-l-4 border-accent text-foreground my-6 pl-6 pr-4 py-4 italic opacity-85;
    }

    /* bold */
    strong {
      @apply text-lg leading-relaxed font-bold opacity-90;
    }

    /* description */
    em {
      @apply text-lg leading-relaxed opacity-90;
    }

    /* keyboard */
    kbd {
      @apply rounded-lg px-2 py-0.5 font-sans text-base ring-1;
    }

    /* code */
    .code-filename {
      @apply bg-foreground/5 text-foreground/50 mt-6 mb-0 flex items-center gap-3 rounded-t-xl px-4 py-2.5 font-mono text-sm;
      border: 1px solid color-mix(in srgb, var(--color-foreground) 12%, transparent);
      border-bottom: none;
    }
    .code-filename::before {
      content: "";
      @apply inline-block shrink-0;
      width: 52px;
      height: 12px;
      background-image:
        radial-gradient(circle at 6px 6px, #ec6a5e 5px, transparent 5px),
        radial-gradient(circle at 26px 6px, #f4bf4f 5px, transparent 5px),
        radial-gradient(circle at 46px 6px, #61c554 5px, transparent 5px);
    }
    .code-filename + .astro-code {
      @apply mt-0 rounded-t-none;
    }
    .astro-code {
      @apply my-6 rounded-xl py-4 overflow-x-auto;
      border: 1px solid color-mix(in srgb, var(--color-foreground) 12%, transparent);
      counter-reset: line;
    }
    .astro-code code {
      @apply bg-inherit p-0 font-medium;
      display: grid;
      width: max-content;
      min-width: 100%;
    }
    .astro-code code .line {
      @apply px-4 leading-relaxed;
      display: inline-block;
    }
    .astro-code code .line::before {
      @apply text-foreground/30 mr-6 inline-block min-w-6 text-right text-sm;
      counter-increment: line;
      content: counter(line);
    }

    code {
      @apply bg-foreground/13 dark:bg-foreground/18 text-foreground rounded-lg px-2 py-0.5 font-mono text-base leading-relaxed opacity-90;
    }

    /* lists */
    ol {
      @apply list-decimal space-y-1 px-8 py-1;
    }
    ul {
      @apply list-disc space-y-1 px-8 py-1;
    }
    li {
      @apply px-1 text-lg leading-relaxed opacity-90;
    }

    /* dictionary */
    dl {
      @apply visible;
    }
    dt {
      @apply visible;
    }
    dd {
      @apply visible;
    }

    /* table */
    .table-wrapper {
      @apply my-8 overflow-x-auto rounded-xl;
      -webkit-overflow-scrolling: touch;
    }
    table {
      @apply mx-auto w-full opacity-90;
    }
    tr {
      @apply visible;
    }
    th {
      @apply bg-foreground/8 ring-foreground/18 whitespace-nowrap px-3 py-1 text-center text-lg ring-1;
    }
    td {
      @apply ring-foreground/18 px-3 py-1 ring-1;
    }

    /* image block */
    figure {
      @apply my-8 select-none flex flex-col items-center;
    }
    figure img:not([data-no-lightbox]) {
      @apply cursor-pointer;
    }
    .chart-container,
    .chart-container * {
      @apply outline-none;
    }
    figcaption {
      @apply text-center text-sm opacity-70 py-2;
    }
    figcaption a {
      @apply text-sm;
    }

    /* media */
    img {
      @apply rounded-xl transition-all duration-150 ease-in-out;
    }
    img:not([data-no-lightbox]) {
      @apply cursor-pointer hover:brightness-90 hover:scale-[1.01];
    }
    iframe {
      @apply ring-accent my-8 ring-1 select-none;
    }

    /* line breaker */
    hr {
      @apply border-foreground/26 mx-13 mt-13 mb-3;
    }


    /* footnotes */
    sup a[data-footnote-ref] {
      @apply text-accent no-underline font-semibold text-sm hover:underline;
    }
    .footnotes {
      @apply mt-13 pt-6 border-t border-foreground/26;
    }
    .footnotes h2 {
      @apply sr-only;
    }
    .footnotes ol {
      @apply list-decimal space-y-2 px-8;
    }
    .footnotes li {
      @apply text-base opacity-80;
    }
    .footnotes a[data-footnote-backref] {
      @apply text-accent no-underline ml-1;
    }
  }

  /* hide line numbers when disabled */
  .markdown.no-line-numbers .astro-code code .line::before {
    content: none;
  }
  .markdown.no-line-numbers .astro-code code .line {
    @apply px-6;
  }
  .markdown.no-line-numbers .with-line-numbers .astro-code code .line::before {
    content: counter(line);
  }
  .markdown.no-line-numbers .with-line-numbers .astro-code code .line {
    @apply px-4;
  }
}
