---
import { getCollection } from "astro:content";
import type { BlogType } from "../content.config";
import { withReadTime } from "../utils/readTime";
import { formatDate } from "../utils/formatDate";
import FeatureCard from "./FeatureCard.astro";

const blogs: BlogType[] = await getCollection("blogs");
const featuredBlogs = withReadTime(blogs)
  .filter((blog: BlogType) => blog.data.featured === true)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<section class="center">
  <h2 class="section-heading">F E A T U R E D</h2>
  <div class="space-y-3">
    {
      featuredBlogs.map((blog: BlogType) => {
        return (
          <FeatureCard
            title={blog.data.title}
            date={formatDate(blog.data.date)}
            url={blog.data.slug}
            tags={blog.data.tags}
            readTime={blog.data.readTime}
            cover={blog.data.cover}
          />
        );
      })
    }
  </div>
</section>
